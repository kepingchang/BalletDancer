package  BalletDancer

import (
	"mind/core/framework/skill"
	"mind/core/framework/log"
	"mind/core/framework/drivers/hexabody"
)

type  BalletDancer struct {
	skill.Base
}

func NewSkill() skill.Interface {
	// Use this method to create a new skill.

	return & BalletDancer{}
}

func (d * BalletDancer) OnStart() {
	// Use this method to do something when this skill is starting.
}

func (d * BalletDancer) OnClose() {
	// Use this method to do something when this skill is closing.
}

func (d * BalletDancer) OnConnect() {
	// Use this method to do something when the remote connected.
}

func (d * BalletDancer) OnDisconnect() {
	// Use this method to do something when the remote disconnected.
}

func (d * BalletDancer) OnRecvJSON(data []byte) {
	// Use this method to do something when skill receive json data from remote client.
}

func (d * BalletDancer) OnRecvString(data string) {

	log.Info.Println("Skill received", len(data), " bytes command", data)

	doSomeSting(data)

	log.Info.Println("Exceute finished.")
}

func doSomeSting(data string) {

	if data == "stop" {
		hexabody.Close()
	}else {
		hexabody.Start()
    	var motion1 = "|V0A90V1A10V2A145V3A90V4A81V5A133V6A90V7A10V8A145V9A90V10A81V11A133V12A90V13A10V14A145V15A90V16A81V17A133V18A0T500|V0A90V1A81V2A57V3A90V4A65V5A150V6A90V7A81V8A57V9A90V10A65V11A150V12A90V13A81V14A57V15A90V16A65V17A150V18A0T500|V0A90V1A81V2A57V3A90V4A81V5A133V6A90V7A81V8A57V9A90V10A81V11A133V12A90V13A10V14A45V15A90V16A81V17A133V18A0T1000|V0A90V1A65V2A150V3A90V4A65V5A150V6A90V7A65V8A150V9A90V10A65V11A150V12A90V13A65V14A150V15A90V16A65V17A150V18A0T500|V0A90V1A81V2A133V3A90V4A10V5A145V6A90V7A81V8A133V9A90V10A10V11A145V12A90V13A81V14A133V15A90V16A10V17A145V18A0T500|V0A90V1A65V2A150V3A90V4A81V5A57V6A90V7A65V8A150V9A90V10A81V11A57V12A90V13A65V14A150V15A90V16A81V17A57V18A0T500|V0A90V1A81V2A133V3A90V4A81V5A57V6A90V7A81V8A133V9A90V10A10V11A45V12A90V13A81V14A133V15A90V16A81V17A57V18A0T1000"
    	var motion2 = "|V0A82V1A64V2A123V3A87V4A80V5A141V6A104V7A82V8A130V9A82V10A64V11A123V12A87V13A80V14A141V15A104V16A82V17A130V18A0T150|V0A90V1A17V2A170V3A90V4A81V5A134V6A108V7A83V8A128V9A82V10A98V11A93V12A84V13A80V14A147V15A99V16A82V17A132V18A0T150|V0A103V1A36V2A170V3A91V4A83V5A127V6A108V7A47V8A155V9A84V10A91V11A106V12A80V13A81V14A151V15A94V16A81V17A133V18A0T150|V0A103V1A82V2A154V3A93V4A86V5A117V6A90V7A17V8A170V9A86V10A86V11A117V12A76V13A82V14A154V15A90V16A81V17A133V18A0T150|V0A99V1A81V2A151V3A95V4A91V5A106V6A71V7A47V8A155V9A88V10A83V11A127V12A76V13A36V14A170V15A85V16A81V17A133V18A0T150|V0A95V1A80V2A147V3A97V4A98V5A93V6A71V7A83V8A128V9A90V10A81V11A134V12A90V13A17V14A170V15A80V16A82V17A132V18A0T150|V0A92V1A80V2A141V3A97V4A64V5A123V6A75V7A82V8A130V9A92V10A80V11A141V12A97V13A64V14A123V15A75V16A82V17A130V18A0T150|V0A90V1A81V2A134V3A90V4A17V5A170V6A80V7A82V8A132V9A95V10A80V11A147V12A97V13A98V14A93V15A71V16A83V17A128V18A0T150|V0A88V1A83V2A127V3A76V4A36V5A170V6A85V7A81V8A133V9A99V10A81V11A151V12A95V13A91V14A106V15A71V16A47V17A155V18A0T150|V0A86V1A86V2A117V3A76V4A82V5A154V6A90V7A81V8A133V9A103V10A82V11A154V12A93V13A86V14A117V15A90V16A17V17A170V18A0T150|V0A84V1A91V2A106V3A80V4A81V5A151V6A94V7A81V8A133V9A103V10A36V11A170V12A91V13A83V14A127V15A108V16A47V17A155V18A0T150|V0A82V1A98V2A93V3A84V4A80V5A147V6A99V7A82V8A132V9A90V10A17V11A170V12A90V13A81V14A134V15A108V16A83V17A128V18A0T150"
    	var motion3 = "|V0A90V1A81V2A133V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T420|V0A90V1A170V2A60V3A90V4A170V5A60V6A90V7A170V8A60V9A90V10A170V11A60V12A90V13A170V14A60V15A90V16A170V17A60V18A0T840|V0A90V1A170V2A50V3A90V4A170V5A50V6A90V7A170V8A50V9A90V10A170V11A50V12A90V13A170V14A50V15A90V16A170V17A50V18A300T840|V0A90V1A170V2A66V3A90V4A170V5A66V6A90V7A170V8A66V9A90V10A170V11A66V12A90V13A170V14A66V15A90V16A170V17A66V18A0T420|V0A90V1A81V2A133V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T420|V0A90V1A170V2A60V3A90V4A170V5A60V6A90V7A170V8A60V9A90V10A170V11A60V12A90V13A170V14A60V15A90V16A170V17A60V18A0T840|V0A90V1A170V2A50V3A90V4A170V5A50V6A90V7A170V8A50V9A90V10A170V11A50V12A90V13A170V14A50V15A90V16A170V17A50V18A60T840|V0A90V1A170V2A66V3A90V4A170V5A66V6A90V7A170V8A66V9A90V10A170V11A66V12A90V13A170V14A66V15A90V16A170V17A66V18A0T420|V0A90V1A81V2A133V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T420"
    	var motion4 = "|V0A90V1A81V2A133V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T500|V0A90V1A65V2A150V3A90V4A65V5A150V6A90V7A65V8A150V9A90V10A65V11A150V12A90V13A65V14A150V15A90V16A65V17A150V18A0T500|V0A90V1A104V2A45V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T500|V0A120V1A10V2A60V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A330T500|V0A90V1A81V2A10V3A90V4A65V5A150V6A90V7A65V8A150V9A90V10A65V11A150V12A90V13A65V14A150V15A90V16A65V17A150V18A0T500|V0A65V1A81V2A180V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A30T500|V0A90V1A81V2A10V3A90V4A150V5A90V6A90V7A150V8A90V9A90V10A150V11A90V12A90V13A150V14A90V15A90V16A150V17A90V18A0T500|V0A120V1A10V2A60V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T500|V0A120V1A81V2A10V3A90V4A65V5A150V6A90V7A65V8A150V9A90V10A65V11A150V12A90V13A65V14A150V15A90V16A65V17A150V18A0T500|V0A70V1A111V2A45V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T500|V0A90V1A81V2A133V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T500|V0A90V1A65V2A150V3A90V4A65V5A150V6A90V7A65V8A150V9A90V10A65V11A150V12A90V13A65V14A150V15A90V16A65V17A150V18A0T500|V0A90V1A81V2A133V3A90V4A104V5A45V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A30T500|V0A90V1A81V2A133V3A60V4A10V5A60V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A30T500|V0A90V1A65V2A150V3A90V4A81V5A10V6A90V7A65V8A150V9A90V10A65V11A150V12A90V13A65V14A150V15A90V16A65V17A150V18A0T500|V0A90V1A81V2A133V3A115V4A81V5A180V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A330T500|V0A90V1A150V2A90V3A90V4A81V5A10V6A90V7A150V8A90V9A90V10A150V11A90V12A90V13A150V14A90V15A90V16A150V17A90V18A0T500|V0A90V1A81V2A133V3A60V4A10V5A60V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T500|V0A90V1A65V2A150V3A60V4A81V5A10V6A90V7A65V8A150V9A90V10A65V11A150V12A90V13A65V14A150V15A90V16A65V17A150V18A0T500|V0A90V1A81V2A133V3A110V4A111V5A45V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T500|V0A90V1A81V2A133V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T500"
    	var motion5 = "|V0A90V1A81V2A133V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T200|V0A80V1A81V2A133V3A80V4A10V5A72V6A80V7A81V8A133V9A80V10A81V11A133V12A80V13A81V14A133V15A80V16A81V17A133V18A0T300|V0A70V1A81V2A133V3A70V4A88V5A43V6A70V7A81V8A133V9A70V10A81V11A133V12A70V13A81V14A133V15A70V16A81V17A133V18A0T300|V0A80V1A81V2A133V3A80V4A62V5A47V6A80V7A81V8A133V9A80V10A81V11A133V12A80V13A81V14A133V15A80V16A81V17A133V18A0T300|V0A70V1A81V2A133V3A70V4A88V5A43V6A70V7A81V8A133V9A70V10A81V11A133V12A70V13A81V14A133V15A70V16A81V17A133V18A0T300|V0A80V1A81V2A133V3A80V4A81V5A133V6A80V7A81V8A133V9A80V10A81V11A133V12A80V13A81V14A133V15A80V16A81V17A133V18A0T200|V0A90V1A81V2A133V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T200|V0A100V1A10V2A72V3A100V4A81V5A133V6A100V7A81V8A133V9A100V10A81V11A133V12A100V13A81V14A133V15A100V16A81V17A133V18A0T300|V0A110V1A88V2A43V3A110V4A81V5A133V6A110V7A81V8A133V9A110V10A81V11A133V12A110V13A81V14A133V15A110V16A81V17A133V18A0T300|V0A100V1A62V2A47V3A100V4A81V5A133V6A100V7A81V8A133V9A100V10A81V11A133V12A100V13A81V14A133V15A100V16A81V17A133V18A0T300|V0A110V1A88V2A43V3A110V4A81V5A133V6A110V7A81V8A133V9A110V10A81V11A133V12A110V13A81V14A133V15A110V16A81V17A133V18A0T300|V0A100V1A81V2A133V3A100V4A81V5A133V6A100V7A81V8A133V9A100V10A81V11A133V12A100V13A81V14A133V15A100V16A81V17A133V18A0T200"
    	var motion6 = "|V0A90V1A81V2A133V3A90V4A81V5A133V6A120V7A110V8A135V9A90V10A81V11A133V12A90V13A81V14A133V15A60V16A110V17A135V18A0T400|V0A120V1A10V2A60V3A60V4A10V5A60V6A120V7A110V8A135V9A90V10A81V11A133V12A90V13A81V14A133V15A60V16A110V17A135V18A0T400|V0A90V1A81V2A10V3A90V4A81V5A10V6A120V7A110V8A135V9A90V10A81V11A133V12A90V13A81V14A133V15A60V16A110V17A135V18A0T400|V0A65V1A81V2A180V3A115V4A81V5A180V6A120V7A110V8A135V9A90V10A81V11A133V12A90V13A81V14A133V15A60V16A110V17A135V18A0T400|V0A90V1A81V2A10V3A90V4A81V5A10V6A120V7A110V8A135V9A90V10A81V11A133V12A90V13A81V14A133V15A60V16A110V17A135V18A0T400|V0A120V1A10V2A60V3A60V4A10V5A60V6A120V7A110V8A135V9A90V10A81V11A133V12A90V13A81V14A133V15A60V16A110V17A135V18A0T400|V0A90V1A81V2A10V3A90V4A81V5A10V6A120V7A110V8A135V9A90V10A81V11A133V12A90V13A81V14A133V15A60V16A110V17A135V18A0T400|V0A120V1A81V2A133V3A60V4A81V5A133V6A120V7A110V8A135V9A90V10A81V11A133V12A90V13A81V14A133V15A60V16A110V17A135V18A0T400|V0A90V1A81V2A10V3A90V4A81V5A10V6A120V7A110V8A135V9A90V10A81V11A133V12A90V13A81V14A133V15A60V16A110V17A135V18A0T400|V0A65V1A10V2A60V3A115V4A10V5A60V6A120V7A110V8A135V9A90V10A81V11A133V12A90V13A81V14A133V15A60V16A110V17A135V18A0T400|V0A90V1A81V2A10V3A90V4A81V5A10V6A120V7A110V8A135V9A90V10A81V11A133V12A90V13A81V14A133V15A60V16A110V17A135V18A0T400|V0A90V1A81V2A133V3A90V4A81V5A133V6A120V7A110V8A135V9A90V10A81V11A133V12A90V13A81V14A133V15A60V16A110V17A135V18A0T400"
        var motion7 = ""
        var motion8 = ""
        var motion9 = ""

        var motion = ""

        for i := 0; i < len(data); i++ {
            switch string(data[i]) {
            case "A":
                motion += motion1
            case "B":
                motion += motion2
            case "C":
                motion += motion3
            case "D":
                motion += motion4
            case "E":
                motion += motion5
            case "F":
                motion += motion6
            case "G":
                motion += motion7
            case "H":
                motion += motion8
            case "I":
                motion += motion9
            default:
                motion += ""
            }
	    }

	    // 去除第一位"|",否则无法执行
	    log.Info.Println("motion = ",motion[1:len(motion)])

    	if err := hexabody.TranslateCommands(motion[1:len(motion)]); err != nil {
		    log.Error.Println("Exceute error:", err)
	    }
	}
}
