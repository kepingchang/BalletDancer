package  BalletDancer

import (
	"mind/core/framework/skill"
	"mind/core/framework/log"
	"mind/core/framework/drivers/hexabody"
)

type  BalletDancer struct {
	skill.Base
}

func NewSkill() skill.Interface {
	// Use this method to create a new skill.

	return & BalletDancer{}
}

func (d * BalletDancer) OnStart() {
	// Use this method to do something when this skill is starting.
}

func (d * BalletDancer) OnClose() {
	// Use this method to do something when this skill is closing.
}

func (d * BalletDancer) OnConnect() {
	// Use this method to do something when the remote connected.
}

func (d * BalletDancer) OnDisconnect() {
	// Use this method to do something when the remote disconnected.
}

func (d * BalletDancer) OnRecvJSON(data []byte) {
	// Use this method to do something when skill receive json data from remote client.
}

func (d * BalletDancer) OnRecvString(data string) {

	log.Info.Println("Skill received", len(data), " bytes command", data)

	doSomeSting(data)

	log.Info.Println("Exceute finished.")
}

func doSomeSting(data string) {

	if data == "stop" {
		hexabody.Close()
	}else {
		hexabody.Start()
    	var arabesque = "|V0A90V1A10V2A145V3A90V4A81V5A133V6A90V7A10V8A145V9A90V10A81V11A133V12A90V13A10V14A145V15A90V16A81V17A133V18A0T500|V0A90V1A81V2A57V3A90V4A65V5A150V6A90V7A81V8A57V9A90V10A65V11A150V12A90V13A81V14A57V15A90V16A65V17A150V18A0T500|V0A90V1A81V2A57V3A90V4A81V5A133V6A90V7A81V8A57V9A90V10A81V11A133V12A90V13A10V14A45V15A90V16A81V17A133V18A0T1000|V0A90V1A65V2A150V3A90V4A65V5A150V6A90V7A65V8A150V9A90V10A65V11A150V12A90V13A65V14A150V15A90V16A65V17A150V18A0T500|V0A90V1A81V2A133V3A90V4A10V5A145V6A90V7A81V8A133V9A90V10A10V11A145V12A90V13A81V14A133V15A90V16A10V17A145V18A0T500|V0A90V1A65V2A150V3A90V4A81V5A57V6A90V7A65V8A150V9A90V10A81V11A57V12A90V13A65V14A150V15A90V16A81V17A57V18A0T500|V0A90V1A81V2A133V3A90V4A81V5A57V6A90V7A81V8A133V9A90V10A10V11A45V12A90V13A81V14A133V15A90V16A81V17A57V18A0T1000"
    	var battement = "|V0A80V1A60V2A150V3A80V4A60V5A150V6A80V7A60V8A150V9A80V10A60V11A150V12A80V13A60V14A150V15A80V16A60V17A150V18A0T200|V0A80V1A81V2A133V3A80V4A22V5A45V6A80V7A81V8A133V9A80V10A81V11A133V12A80V13A81V14A133V15A80V16A81V17A133V18A0T400|V0A70V1A81V2A133V3A70V4A10V5A46V6A70V7A81V8A133V9A70V10A81V11A133V12A70V13A81V14A133V15A70V16A81V17A133V18A0T800|V0A70V1A81V2A133V3A60V4A85V5A72V6A70V7A81V8A133V9A70V10A81V11A133V12A70V13A81V14A133V15A70V16A81V17A133V18A0T800|V0A90V1A81V2A133V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T400|V0A90V1A81V2A133V3A90V4A53V5A149V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T200|V0A90V1A81V2A133V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T200|V0A80V1A60V2A150V3A80V4A60V5A150V6A80V7A60V8A150V9A80V10A60V11A150V12A80V13A60V14A150V15A80V16A60V17A150V18A0T200|V0A100V1A22V2A45V3A100V4A81V5A133V6A100V7A81V8A133V9A100V10A81V11A133V12A100V13A81V14A133V15A100V16A81V17A133V18A0T400|V0A110V1A10V2A46V3A110V4A81V5A133V6A110V7A81V8A133V9A110V10A81V11A133V12A110V13A81V14A133V15A110V16A81V17A133V18A0T800|V0A120V1A85V2A72V3A110V4A81V5A133V6A110V7A81V8A133V9A110V10A81V11A133V12A110V13A81V14A133V15A110V16A81V17A133V18A0T800|V0A90V1A81V2A133V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T400|V0A90V1A53V2A149V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T200|V0A90V1A81V2A133V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T200"
    	var ecarte = "|V0A90V1A81V2A133V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T500|V0A90V1A65V2A150V3A90V4A65V5A150V6A90V7A65V8A150V9A90V10A65V11A150V12A90V13A65V14A150V15A90V16A65V17A150V18A0T500|V0A90V1A104V2A45V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T500|V0A120V1A10V2A60V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A330T500|V0A90V1A81V2A10V3A90V4A65V5A150V6A90V7A65V8A150V9A90V10A65V11A150V12A90V13A65V14A150V15A90V16A65V17A150V18A0T500|V0A65V1A81V2A180V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A30T500|V0A90V1A81V2A10V3A90V4A150V5A90V6A90V7A150V8A90V9A90V10A150V11A90V12A90V13A150V14A90V15A90V16A150V17A90V18A0T500|V0A120V1A10V2A60V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T500|V0A120V1A81V2A10V3A90V4A65V5A150V6A90V7A65V8A150V9A90V10A65V11A150V12A90V13A65V14A150V15A90V16A65V17A150V18A0T500|V0A70V1A111V2A45V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T500|V0A90V1A81V2A133V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T500|V0A90V1A65V2A150V3A90V4A65V5A150V6A90V7A65V8A150V9A90V10A65V11A150V12A90V13A65V14A150V15A90V16A65V17A150V18A0T500|V0A90V1A81V2A133V3A90V4A104V5A45V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A30T500|V0A90V1A81V2A133V3A60V4A10V5A60V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A30T500|V0A90V1A65V2A150V3A90V4A81V5A10V6A90V7A65V8A150V9A90V10A65V11A150V12A90V13A65V14A150V15A90V16A65V17A150V18A0T500|V0A90V1A81V2A133V3A115V4A81V5A180V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A330T500|V0A90V1A150V2A90V3A90V4A81V5A10V6A90V7A150V8A90V9A90V10A150V11A90V12A90V13A150V14A90V15A90V16A150V17A90V18A0T500|V0A90V1A81V2A133V3A60V4A10V5A60V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T500|V0A90V1A65V2A150V3A60V4A81V5A10V6A90V7A65V8A150V9A90V10A65V11A150V12A90V13A65V14A150V15A90V16A65V17A150V18A0T500|V0A90V1A81V2A133V3A110V4A111V5A45V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T500|V0A90V1A81V2A133V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T500"
    	var gateway = "|V0A90V1A81V2A133V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T200|V0A80V1A81V2A133V3A80V4A10V5A72V6A80V7A81V8A133V9A80V10A81V11A133V12A80V13A81V14A133V15A80V16A81V17A133V18A0T300|V0A70V1A81V2A133V3A70V4A88V5A43V6A70V7A81V8A133V9A70V10A81V11A133V12A70V13A81V14A133V15A70V16A81V17A133V18A0T300|V0A80V1A81V2A133V3A80V4A62V5A47V6A80V7A81V8A133V9A80V10A81V11A133V12A80V13A81V14A133V15A80V16A81V17A133V18A0T300|V0A70V1A81V2A133V3A70V4A88V5A43V6A70V7A81V8A133V9A70V10A81V11A133V12A70V13A81V14A133V15A70V16A81V17A133V18A0T300|V0A80V1A81V2A133V3A80V4A81V5A133V6A80V7A81V8A133V9A80V10A81V11A133V12A80V13A81V14A133V15A80V16A81V17A133V18A0T200|V0A90V1A81V2A133V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T200|V0A100V1A10V2A72V3A100V4A81V5A133V6A100V7A81V8A133V9A100V10A81V11A133V12A100V13A81V14A133V15A100V16A81V17A133V18A0T300|V0A110V1A88V2A43V3A110V4A81V5A133V6A110V7A81V8A133V9A110V10A81V11A133V12A110V13A81V14A133V15A110V16A81V17A133V18A0T300|V0A100V1A62V2A47V3A100V4A81V5A133V6A100V7A81V8A133V9A100V10A81V11A133V12A100V13A81V14A133V15A100V16A81V17A133V18A0T300|V0A110V1A88V2A43V3A110V4A81V5A133V6A110V7A81V8A133V9A110V10A81V11A133V12A110V13A81V14A133V15A110V16A81V17A133V18A0T300|V0A100V1A81V2A133V3A100V4A81V5A133V6A100V7A81V8A133V9A100V10A81V11A133V12A100V13A81V14A133V15A100V16A81V17A133V18A0T200"
    	var jete = "|V0A90V1A130V2A95V3A120V4A90V5A45V6A90V7A130V8A95V9A120V10A90V11A45V12A90V13A130V14A95V15A120V16A90V17A45V18A0T400|V0A90V1A130V2A95V3A105V4A90V5A145V6A90V7A130V8A95V9A105V10A90V11A145V12A90V13A130V14A95V15A105V16A90V17A145V18A0T200|V0A90V1A130V2A95V3A105V4A90V5A45V6A90V7A130V8A95V9A105V10A90V11A45V12A90V13A130V14A95V15A105V16A90V17A45V18A0T200|V0A90V1A90V2A135V3A120V4A90V5A135V6A90V7A90V8A135V9A120V10A90V11A135V12A90V13A90V14A135V15A120V16A90V17A135V18A0T400|V0A90V1A90V2A180V3A120V4A90V5A135V6A90V7A90V8A180V9A120V10A90V11A135V12A90V13A90V14A180V15A120V16A90V17A135V18A0T200|V0A105V1A90V2A180V3A120V4A90V5A135V6A105V7A90V8A180V9A120V10A90V11A135V12A105V13A90V14A180V15A120V16A90V17A135V18A0T200|V0A120V1A90V2A45V3A90V4A130V5A95V6A120V7A90V8A45V9A90V10A130V11A95V12A120V13A90V14A45V15A90V16A130V17A95V18A0T400|V0A105V1A90V2A145V3A90V4A130V5A95V6A105V7A90V8A145V9A90V10A130V11A95V12A105V13A90V14A145V15A90V16A130V17A95V18A0T200|V0A105V1A90V2A45V3A90V4A130V5A95V6A105V7A90V8A45V9A90V10A130V11A95V12A105V13A90V14A45V15A90V16A130V17A95V18A0T200|V0A120V1A90V2A135V3A90V4A90V5A135V6A120V7A90V8A135V9A90V10A90V11A135V12A120V13A90V14A135V15A90V16A90V17A135V18A0T400|V0A120V1A90V2A135V3A90V4A90V5A180V6A120V7A90V8A135V9A90V10A90V11A180V12A120V13A90V14A135V15A90V16A90V17A180V18A0T200|V0A120V1A90V2A135V3A105V4A90V5A180V6A120V7A90V8A135V9A105V10A90V11A180V12A120V13A90V14A135V15A105V16A90V17A180V18A0T200"
    	var ouverte = "|V0A90V1A81V2A133V3A90V4A81V5A133V6A120V7A110V8A135V9A90V10A81V11A133V12A90V13A81V14A133V15A60V16A110V17A135V18A0T400|V0A120V1A10V2A60V3A60V4A10V5A60V6A120V7A110V8A135V9A90V10A81V11A133V12A90V13A81V14A133V15A60V16A110V17A135V18A0T400|V0A90V1A81V2A10V3A90V4A81V5A10V6A120V7A110V8A135V9A90V10A81V11A133V12A90V13A81V14A133V15A60V16A110V17A135V18A0T400|V0A65V1A81V2A180V3A115V4A81V5A180V6A120V7A110V8A135V9A90V10A81V11A133V12A90V13A81V14A133V15A60V16A110V17A135V18A0T400|V0A90V1A81V2A10V3A90V4A81V5A10V6A120V7A110V8A135V9A90V10A81V11A133V12A90V13A81V14A133V15A60V16A110V17A135V18A0T400|V0A120V1A10V2A60V3A60V4A10V5A60V6A120V7A110V8A135V9A90V10A81V11A133V12A90V13A81V14A133V15A60V16A110V17A135V18A0T400|V0A90V1A81V2A10V3A90V4A81V5A10V6A120V7A110V8A135V9A90V10A81V11A133V12A90V13A81V14A133V15A60V16A110V17A135V18A0T400|V0A120V1A81V2A133V3A60V4A81V5A133V6A120V7A110V8A135V9A90V10A81V11A133V12A90V13A81V14A133V15A60V16A110V17A135V18A0T400|V0A90V1A81V2A10V3A90V4A81V5A10V6A120V7A110V8A135V9A90V10A81V11A133V12A90V13A81V14A133V15A60V16A110V17A135V18A0T400|V0A65V1A10V2A60V3A115V4A10V5A60V6A120V7A110V8A135V9A90V10A81V11A133V12A90V13A81V14A133V15A60V16A110V17A135V18A0T400|V0A90V1A81V2A10V3A90V4A81V5A10V6A120V7A110V8A135V9A90V10A81V11A133V12A90V13A81V14A133V15A60V16A110V17A135V18A0T400|V0A90V1A81V2A133V3A90V4A81V5A133V6A120V7A110V8A135V9A90V10A81V11A133V12A90V13A81V14A133V15A60V16A110V17A135V18A0T400"
        var plie = "|V0A75V1A81V2A133V3A75V4A42V5A172V6A75V7A81V8A133V9A75V10A81V11A133V12A75V13A42V14A172V15A75V16A81V17A133V18A0T200|V0A90V1A81V2A133V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T200|V0A75V1A81V2A133V3A75V4A42V5A172V6A75V7A81V8A133V9A75V10A81V11A133V12A75V13A42V14A172V15A75V16A81V17A133V18A0T200|V0A90V1A81V2A133V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T200|V0A105V1A42V2A172V3A105V4A81V5A133V6A105V7A81V8A133V9A105V10A42V11A172V12A105V13A81V14A133V15A105V16A81V17A133V18A0T200|V0A90V1A81V2A133V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T200|V0A105V1A42V2A172V3A105V4A81V5A133V6A105V7A81V8A133V9A105V10A42V11A172V12A105V13A81V14A133V15A105V16A81V17A133V18A0T200|V0A90V1A81V2A133V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T200|V0A75V1A81V2A133V3A75V4A81V5A133V6A75V7A42V8A172V9A75V10A81V11A133V12A75V13A81V14A133V15A75V16A42V17A172V18A0T200|V0A90V1A81V2A133V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T200|V0A75V1A81V2A133V3A75V4A81V5A133V6A75V7A42V8A172V9A75V10A81V11A133V12A75V13A81V14A133V15A75V16A42V17A172V18A0T200|V0A90V1A81V2A133V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T200"
        var releve = "|V0A90V1A81V2A133V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T420|V0A90V1A170V2A60V3A90V4A170V5A60V6A90V7A170V8A60V9A90V10A170V11A60V12A90V13A170V14A60V15A90V16A170V17A60V18A0T840|V0A90V1A170V2A50V3A90V4A170V5A50V6A90V7A170V8A50V9A90V10A170V11A50V12A90V13A170V14A50V15A90V16A170V17A50V18A300T840|V0A90V1A170V2A66V3A90V4A170V5A66V6A90V7A170V8A66V9A90V10A170V11A66V12A90V13A170V14A66V15A90V16A170V17A66V18A0T420|V0A90V1A81V2A133V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T420|V0A90V1A170V2A60V3A90V4A170V5A60V6A90V7A170V8A60V9A90V10A170V11A60V12A90V13A170V14A60V15A90V16A170V17A60V18A0T840|V0A90V1A170V2A50V3A90V4A170V5A50V6A90V7A170V8A50V9A90V10A170V11A50V12A90V13A170V14A50V15A90V16A170V17A50V18A60T840|V0A90V1A170V2A66V3A90V4A170V5A66V6A90V7A170V8A66V9A90V10A170V11A66V12A90V13A170V14A66V15A90V16A170V17A66V18A0T420|V0A90V1A81V2A133V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T420"
        var saute = "|V0A75V1A81V2A133V3A75V4A42V5A172V6A75V7A81V8A133V9A75V10A81V11A133V12A75V13A42V14A172V15A75V16A81V17A133V18A0T200|V0A90V1A81V2A133V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T200|V0A75V1A81V2A133V3A75V4A42V5A172V6A75V7A81V8A133V9A75V10A81V11A133V12A75V13A42V14A172V15A75V16A81V17A133V18A0T200|V0A90V1A81V2A133V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T200|V0A105V1A42V2A172V3A105V4A81V5A133V6A105V7A81V8A133V9A105V10A42V11A172V12A105V13A81V14A133V15A105V16A81V17A133V18A0T200|V0A90V1A81V2A133V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T200|V0A105V1A42V2A172V3A105V4A81V5A133V6A105V7A81V8A133V9A105V10A42V11A172V12A105V13A81V14A133V15A105V16A81V17A133V18A0T200|V0A90V1A81V2A133V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T200|V0A75V1A81V2A133V3A75V4A81V5A133V6A75V7A42V8A172V9A75V10A81V11A133V12A75V13A81V14A133V15A75V16A42V17A172V18A0T200|V0A90V1A81V2A133V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T200|V0A75V1A81V2A133V3A75V4A81V5A133V6A75V7A42V8A172V9A75V10A81V11A133V12A75V13A81V14A133V15A75V16A42V17A172V18A0T200|V0A90V1A81V2A133V3A90V4A81V5A133V6A90V7A81V8A133V9A90V10A81V11A133V12A90V13A81V14A133V15A90V16A81V17A133V18A0T200"

        var motion = ""

        for i := 0; i < len(data); i++ {
            switch string(data[i]) {
            case "A":
                motion += arabesque
            case "B":
                motion += battement
            case "E":
                motion += ecarte
            case "G":
                motion += gateway
            case "J":
                motion += jete
            case "O":
                motion += ouverte
            case "P":
                motion += plie
            case "R":
                motion += releve
            case "S":
                motion += saute
            default:
                motion += ""
            }
	    }

	    // 去除第一位"|",否则无法执行
	    log.Info.Println("motion = ",motion[1:len(motion)])

    	if err := hexabody.TranslateCommands(motion[1:len(motion)]); err != nil {
		    log.Error.Println("Exceute error:", err)
	    }
	}
}
